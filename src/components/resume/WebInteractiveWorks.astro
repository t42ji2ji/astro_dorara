---
// Import sitemap images
import astrologyImage from '~/assets/sitemap/astrology.png'
import bumperImage from '~/assets/sitemap/bumper.png'
import chiiImage from '~/assets/sitemap/chii.png'
import drawImage from '~/assets/sitemap/draw.png'
import imgifImage from '~/assets/sitemap/imgif.png'
import lifeImage from '~/assets/sitemap/life.png'
import luckImage from '~/assets/sitemap/luck.png'
import lyricsImage from '~/assets/sitemap/lyrics.png'
import mandalasImage from '~/assets/sitemap/mandalas.png'
import manSplainImage from '~/assets/sitemap/manSplain.png'
import mrtImage from '~/assets/sitemap/mrt.png'
import qrcodeImage from '~/assets/sitemap/qrcode.png'
import rebuttalImage from '~/assets/sitemap/rebuttal.png'
import scratchCardImage from '~/assets/sitemap/scratch-card.png'
import skillImage from '~/assets/sitemap/skill.png'
import socialCardsImage from '~/assets/sitemap/social-cards.png'
import threadsImage from '~/assets/sitemap/threads.png'
import vcreatorImage from '~/assets/sitemap/vcreator.png'
import voiceImage from '~/assets/sitemap/voice.png'
import wishImage from '~/assets/sitemap/wish.png'
import woopImage from '~/assets/sitemap/woop.png'
import gpxImage from '~/assets/sitemap/gpx.png'

const categories = [
  { id: 'personal', name: 'å€‹äººæˆé•·' },
  { id: 'create', name: 'å‰µä½œå·¥å…·' },
  { id: 'fun', name: 'è¶£å‘³é«”é©—' },
  { id: 'utility', name: 'å¯¦ç”¨å·¥å…·' },
  { id: 'all', name: 'å…¨éƒ¨' },
]

const webWorks = [
  {
    title: 'è¨±é¡˜ Wishes',
    description: 'é–‹å§‹ä½ çš„ç¥ç§˜å åœä¹‹æ—…ï¼Œæ¢ç´¢å¤©æ²³å¯†èªçš„æŒ‡å¼•',
    path: '/wish',
    image: wishImage,
    categories: ['fun'],
  },
  {
    title: 'æŠ½ç‰Œå åœ',
    description: 'æŠŠè‡ªå·±è¨­è¨ˆçš„å åœç‰Œåšæˆç·šä¸Šäº’å‹•ç‰ˆæœ¬ï¼Œæ¢ç´¢ç¥ç§˜çš„å¤©æ²³å¯†èªã€‚',
    path: '/draw',
    image: drawImage,
    categories: ['fun'],
  },
  {
    title: 'ç´«å¾®æ˜Ÿåº§',
    description: 'å°‡å…­å¹´ç´«å¾®æ–—æ•¸ç¶“é©—çµåˆ AIï¼Œè®“ AI å¹«ä½ æ¢ç´¢æ˜Ÿåº§é‹å‹¢ï¼Œé«”é©—æ–°ä¸–ä»£çš„å‘½ç†æœå‹™ã€‚',
    path: '/astrology',
    image: astrologyImage,
    categories: ['fun'],
    featured: true,
  },
  {
    title: 'æŠ•èƒæŠ½å¡æ©Ÿ',
    description: 'ç”¨æ©Ÿç‡æ¨¡æ“¬å‡ºç”Ÿåœ°ï¼Œè®“äººæ›´ç›´è§€åœ°æ„Ÿå—ç”Ÿåœ¨å°ç£çš„å¹¸é‹èˆ‡ä¸æ˜“ï¼Œæé†’å¤§å®¶çæƒœç•¶ä¸‹ã€‚',
    path: '/luck',
    image: luckImage,
    categories: ['fun'],
  },
  {
    title: 'å°‘å¹´A çš„æ•…äº‹',
    description: 'å°‡è‡ªæˆ‘æ‡·ç–‘èˆ‡å­¤å–®çš„å¿ƒæƒ…è½‰åŒ–ç‚º AI å°ç”·å­©ï¼Œèˆ‡ä»–å°è©±ï¼Œæ¢ç´¢ç†è§£èˆ‡è‡ªæˆ‘æ¥ç´çš„å¯èƒ½æ€§ã€‚',
    path: '/voice',
    image: voiceImage,
    categories: ['personal'],
    featured: true,
  },
  {
    title: 'åé§é‡‘å­—å¡”',
    description: 'é‹ç”¨ Paul Graham çš„ç†è«–ï¼Œå¹«åŠ©ä½ è¾¨è­˜è¨è«–å±¤æ¬¡ï¼Œä¿ƒé€²æ›´å¥åº·çš„ç·šä¸Šæºé€šï¼Œæå‡ç¤¾ç¾¤åª’é«”çš„è¨è«–å“è³ªã€‚',
    path: '/rebuttal',
    image: rebuttalImage,
    categories: ['personal'],
    featured: true,
  },
  {
    title: 'ç”Ÿå‘½å€’è¨ˆæ™‚',
    description: 'ç”¨æœ€ç›´è§€çš„æ–¹å¼æ„Ÿå—æ™‚é–“çš„æµé€ã€‚çœ‹åˆ°é€²åº¦æ¢ä¸€é»é»å‰é€²ï¼Œæ›´èƒ½é«”æœƒäººç”Ÿçš„æœ‰é™ï¼Œæé†’è‡ªå·±æ´»åœ¨ç•¶ä¸‹ã€çæƒœå¥åº·ã€‚',
    path: '/life',
    image: lifeImage,
    categories: ['personal'],
  },
  // {
  //   title: 'æƒ…äººå‰µä½œå·¥å…·',
  //   description: 'æ‹¯æ•‘æ²’å¿ƒç”·å‹çš„æ‡‰æ™¯ä¹‹ä½œï¼Œç·Šæ€¥è£½ä½œå°ˆå±¬æƒ…äººç¯€å¡ç‰‡ï¼Œç‚ºç‰¹åˆ¥çš„äººå‰µä½œé©šå–œã€‚',
  //   path: '/vcreator',
  //   image: vcreatorImage,
  //   categories: ['create'],
  // },
  {
    title: 'ç”·æ€§èªªæ•™',
    description: 'åæ€ã€Œç”·æ€§èªªæ•™ã€ç¾è±¡ï¼Œé€éå°æ¸¬é©—è©•ä¼°è‡ªå·±çš„èªªæ•™æŒ‡æ•¸ï¼Œä¿ƒé€²è‡ªæˆ‘è¦ºå¯Ÿã€‚',
    path: '/manSplain',
    image: manSplainImage,
    categories: ['fun'],
  },
  {
    title: 'æŠ€èƒ½å­¸ç¿’è¨ˆç®—å™¨',
    description:
      'ã€Œäººç”Ÿæœ‰å¤šå°‘å€‹ä¸€è¬å°æ™‚ï¼Ÿã€é€™å€‹å°å·¥å…·èƒ½å¹«ä½ é‡åŒ–å­¸ç¿’æ–°æŠ€èƒ½æ‰€éœ€çš„æ™‚é–“ï¼Œè®“ç›®æ¨™æ›´å‹™å¯¦ï¼Œä¹Ÿæ›´èƒ½ç£ä¿ƒè‡ªå·±ï¼Œå¯¦è¸é•·æœŸä¸»ç¾©çš„æˆé•·æ€ç¶­ã€‚',
    path: '/skill',
    image: skillImage,
    categories: ['utility'],
  },
  {
    title: 'æ›¼é™€ç¾…ç”¢ç”Ÿå™¨',
    description: 'æ¸¬è©¦ Claude 3.7 å¼·æ‚èƒ½åŠ›ï¼Œå‰µé€ å±¬æ–¼ä½ çš„æ›¼é™€ç¾…è—è¡“ï¼Œé«”é©—å°ç¨±ä¹‹ç¾èˆ‡ AI å‰µä½œçš„æ¨‚è¶£ã€‚',
    path: '/mandalas',
    image: mandalasImage,
    categories: ['create'],
  },
  {
    title: 'WOOP è¡Œå‹•åœ°åœ–',
    description: 'é‹ç”¨å¿ƒç†å­¸ WOOP ç†è«–ï¼Œé€é AI å”åŠ©å°‡é¡˜æœ›æ‹†è§£æˆå…·é«”è¡Œå‹•è·¯å¾‘ï¼Œå¹«åŠ©ä½ æ”»å…‹æ‹–å»¶ï¼Œå¯¦ç¾ç›®æ¨™ã€‚',
    path: '/woop',
    image: woopImage,
    categories: ['personal'],
  },
  {
    title: 'çƒé«”æ’æ“Šå°æˆ°',
    description: 'æœ‰è¶£çš„ç‰©ç†ç¢°æ’éŠæˆ²',
    path: '/bumper',
    image: bumperImage,
    categories: ['fun'],
  },
  {
    title: 'çœ¼å†’é‡‘æ˜Ÿç”Ÿæˆå™¨',
    description: 'æ“šèªªçœ‹å¯æ„›çš„æ±è¥¿èƒ½æ¸›å£“ï¼ŸæŠŠä»»ä½•ç…§ç‰‡éƒ½è®Šæˆã€Œå‰ä¼Šå¡å“‡ã€é¢¨æ ¼ï¼Œç™‚ç™’ä½ çš„å¿ƒæƒ…ã€‚',
    path: '/chii',
    image: chiiImage,
    categories: ['create'],
  },
  {
    title: 'åœ–ç‰‡è½‰GIFå·¥å…·',
    description: 'é‡å°è£½ä½œ Meme/GIF çš„ç—›é»å„ªåŒ–ï¼Œè®“ä½ æ›´å¿«ç·¨è¼¯ã€å‰µä½œæœ‰è¶£çš„ GIF å‹•ç•«ã€‚',
    path: '/imgif',
    image: imgifImage,
    categories: ['utility', 'create'],
  },
  {
    title: 'GPX è·¯å¾‘å‹•ç•«',
    description: 'èƒ½æ ¹æ“š GPX å¹«ä½ ç”Ÿæˆè·¯å¾‘å‹•ç•«çš„ç¶²ç«™',
    path: 'https://gpx.dorara.app/',
    image: gpxImage,
    categories: ['utility', 'create'],
  },
  {
    title: 'èª°é‚„è…¿é–‹é–‹',
    description: 'ä»¥ã€Œç”·æ€§é–‹è…¿ã€ç¤¾æœƒè­°é¡Œç‚ºéˆæ„Ÿï¼Œçµåˆå¯æ„›å°éŠæˆ²ï¼Œå¸Œæœ›å¼•èµ·é—œæ³¨èˆ‡è¨è«–ï¼Œè€Œéèªªæ•™ã€‚',
    path: '/mrt',
    image: mrtImage,
    categories: ['fun'],
  },
  {
    title: 'QR Code ç”¢ç”Ÿå™¨',
    description: 'å‰µå»ºè‡ªå®šç¾©é¢¨æ ¼çš„ QR ç¢¼',
    path: '/qrcode',
    image: qrcodeImage,
    categories: ['utility', 'create'],
  },
  {
    title: 'æ—¥æ–‡æ­Œè©ç¿»è­¯',
    description: 'é¡¯ç¤ºæ—¥æ–‡æ­Œè©çš„ç¾…é¦¬æ‹¼éŸ³å’Œä¸­æ–‡ç¿»è­¯',
    path: '/lyrics',
    image: lyricsImage,
    categories: ['utility'],
  },
  {
    title: 'ç¤¾ç¾¤å¡ç‰‡è£½ä½œ',
    description: 'ç‚º Instagram æˆ– Threads å‰µå»ºç²¾ç¾çš„å¡ç‰‡ç³»åˆ—',
    path: '/social-cards',
    image: socialCardsImage,
    categories: ['create'],
    featured: true,
  },
  {
    title: 'Dweam ç¤¾ç¾¤',
    description: 'ç‚ºå¤¢æƒ³å®¶æ‰“é€ çš„å…±å‰µç¤¾ç¾¤',
    path: '/threads',
    image: threadsImage,
    categories: ['personal'],
    featured: true,
  },
  {
    title: 'åˆ®åˆ®æ¨‚',
    description: 'æ–°å¹´é¡˜æœ›å¤ªå¤šä¸çŸ¥å¾ä½•é–‹å§‹ï¼Ÿåˆ®ä¸€ä¸‹æ±ºå®šå„ªå…ˆç´šï¼Œç™¼ç¾ä½ çš„æ–°å¹´ç¬¬ä¸€é¡˜æœ›ã€‚',
    path: '/scratch-card',
    image: scratchCardImage,
    categories: ['fun'],
  },
]
---

<!-- Web äº’å‹•ä½œå“ -->
<h4 class="font-bold text-lg mb-4 mt-8">ğŸŒ Web äº’å‹•ä½œå“</h4>

<!-- Filter Tabs -->
<div class="filter-tabs mb-6 overflow-x-auto">
  <div class="flex gap-2 min-w-max pb-2">
    {
      categories.map((category) => (
        <button class={`filter-btn ${category.id === 'personal' ? 'active' : ''}`} data-category={category.id}>
          {category.name}
        </button>
      ))
    }
  </div>
</div>

<div class="cards-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5" id="web-works-grid">
  {
    webWorks.map((work) => (
      <a
        href={work.path.startsWith('http') ? work.path : `https://dweam.xyz${work.path}`}
        target="_blank"
        class="web-work-card group"
        data-categories={JSON.stringify(work.categories)}
        style={`display: ${work.categories.includes('personal') ? 'flex' : 'none'}; opacity: ${work.categories.includes('personal') ? '1' : '0'};`}
      >
        <div class="web-work-image-container">
          <img src={work.image.src} alt={work.title} class="web-work-image" />
          <div class="web-work-overlay">
            <span class="view-btn">View Project</span>
          </div>
        </div>
        <div class="web-work-info">
          <h3 class="web-work-title">{work.title}</h3>
          <p class="web-work-desc">{work.description}</p>
        </div>
      </a>
    ))
  }
</div>

<script>
  function initWebWorksFilter() {
    const filterBtns = document.querySelectorAll('.filter-btn')
    const workCards = document.querySelectorAll('.web-work-card')

    if (!filterBtns.length || !workCards.length)
return

    filterBtns.forEach((btn) => {
      btn.addEventListener('click', () => {
        // Remove active class from all buttons
        filterBtns.forEach((b) => b.classList.remove('active'))
        // Add active class to clicked button
        btn.classList.add('active')

        const category = btn.getAttribute('data-category')
        filterItems(category)
      })
    })

    // Initial filter for 'personal'
    filterItems('personal')
  }

  function filterItems(category: string | null) {
    if (!category)
return

    const workCards = document.querySelectorAll('.web-work-card')
    workCards.forEach((card) => {
      const categories = JSON.parse(card.getAttribute('data-categories') || '[]')
      const element = card as HTMLElement

      if (category === 'all' || categories.includes(category)) {
        element.style.display = 'flex'
        // Simple fade in effect could be added here
        setTimeout(() => {
          element.style.opacity = '1'
        }, 10)
      } else {
        element.style.display = 'none'
        element.style.opacity = '0'
      }
    })
  }

  // Initialize on load and page transitions
  document.addEventListener('DOMContentLoaded', initWebWorksFilter)
  document.addEventListener('astro:page-load', initWebWorksFilter)
  document.addEventListener('swup:contentReplaced', initWebWorksFilter)
</script>

<style>
  /* Web Work Styles */
  .filter-btn {
    padding: 0.5rem 1rem;
    border-radius: 20px;
    background: var(--card-bg);
    border: 1px solid var(--card-border);
    color: #666;
    font-size: 0.875rem;
    cursor: pointer;
    transition: all 0.3s;
    white-space: nowrap;
  }

  :global(.dark) .filter-btn {
    color: #aaa;
  }

  .filter-btn:hover {
    border-color: #667eea;
    color: #667eea;
  }

  .filter-btn.active {
    background: #667eea;
    color: white;
    border-color: #667eea;
  }

  .web-work-card {
    display: flex;
    flex-direction: column;
    background: var(--card-bg);
    border: 1px solid var(--card-border);
    border-radius: 16px;
    overflow: hidden;
    text-decoration: none;
    color: inherit;
    box-shadow: var(--card-shadow);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    height: 100%;
  }

  .web-work-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15);
    border-color: rgba(102, 126, 234, 0.3);
  }

  :global(.dark) .web-work-card:hover {
    box-shadow: 0 12px 30px rgba(0, 0, 0, 0.5);
  }

  .web-work-image-container {
    width: 100%;
    aspect-ratio: 16/10;
    overflow: hidden;
    position: relative;
    background: #f5f5f5;
    border-bottom: 1px solid var(--card-border);
  }

  :global(.dark) .web-work-image-container {
    background: #2a2a2a;
  }

  .web-work-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.5s ease;
  }

  .web-work-card:hover .web-work-image {
    transform: scale(1.05);
  }

  .web-work-overlay {
    position: absolute;
    inset: 0;
    background: rgba(0, 0, 0, 0.3);
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  .web-work-card:hover .web-work-overlay {
    opacity: 1;
  }

  .view-btn {
    background: rgba(255, 255, 255, 0.9);
    color: #333;
    padding: 0.5rem 1rem;
    border-radius: 20px;
    font-size: 0.875rem;
    font-weight: 600;
    transform: translateY(10px);
    transition: transform 0.3s ease;
  }

  .web-work-card:hover .view-btn {
    transform: translateY(0);
  }

  .web-work-info {
    padding: 1.25rem;
    flex: 1;
    display: flex;
    flex-direction: column;
  }

  .web-work-title {
    font-weight: 700;
    font-size: 1.1rem;
    margin-bottom: 0.5rem;
    line-height: 1.3;
  }

  .web-work-desc {
    font-size: 0.875rem;
    color: #666;
    line-height: 1.5;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  :global(.dark) .web-work-desc {
    color: #aaa;
  }
</style>
