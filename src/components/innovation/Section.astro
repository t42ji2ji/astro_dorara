---
interface Props {
  class?: string
  id?: string
}

const { class: className, id } = Astro.props
---

<section
  id={id}
  class:list={[
    'relative z-10 py-24 px-6 md:px-12 max-w-7xl mx-auto opacity-0 translate-y-10 transition-all duration-1000 ease-out reveal-section',
    className,
  ]}
>
  <slot />
</section>

<script>
  const observerOptions = {
    root: null,
    rootMargin: '0px',
    threshold: 0.1,
  }

  const observer = new IntersectionObserver((entries) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        entry.target.classList.remove('opacity-0', 'translate-y-10')
        entry.target.classList.add('opacity-100', 'translate-y-0')
        observer.unobserve(entry.target)
      }
    })
  }, observerOptions)

  document.querySelectorAll('.reveal-section').forEach((section) => {
    observer.observe(section)
  })
</script>
